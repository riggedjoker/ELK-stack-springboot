
# ELK Stack Integration with Spring Boot Application

## Overview

This project demonstrates how to set up an ELK (Elasticsearch, Logstash, Kibana) stack to centralize, analyze, and visualize logs generated by a Dockerized Spring Boot application. It enhances log management, monitoring, and application performance insights.

## Prerequisites

Ensure the following tools are installed and set up before starting:

- **Spring Boot Application**
- **Elasticsearch**
- **Kibana**
- **Logstash**
- **Docker**
- **Log4j2** (for logging)

## Setup Instructions

### 1. Clone the Repository

First, clone the repository containing your project files:

```bash
git clone git@github.com:riggedjoker/ELK-stack-springboot.git
cd 
```

### 2. Docker Setup

#### Docker Compose Configuration

Make sure your `docker-compose.yml` is properly configured as shown below:

```yaml
services:
  elasticsearch:
    image: docker.elastic.co/elasticsearch/elasticsearch:8.10
    container_name: elasticsearch
    environment:
      - discovery.type=single-node
      - xpack.security.enabled=false
    ports:
      - "9200:9200"
      - "9300:9300"
    networks:
      - dev-hello

  logstash:
    image: docker.elastic.co/logstash/logstash:8.10
    container_name: logstash
    volumes:
      - ./logs:/usr/share/logstash/logs
      - ./logstash/config/logstash.yml:/usr/share/logstash/config/logstash.yml
      - ./logstash/pipeline:/usr/share/logstash/pipeline
    ports:
      - "5044:5044"
      - "9600:9600"
    networks:
      - dev-hello
    depends_on:
      - elasticsearch

  kibana:
    image: docker.elastic.co/kibana/kibana:8.10
    container_name: kibana
    environment:
      ELASTICSEARCH_HOSTS: http://elasticsearch:9200
    ports:
      - "5601:5601"
    networks:
      - dev-hello
    depends_on:
      - elasticsearch

  helloworld:
    build: .
    image: hello-world-app
    container_name: hello-world
    ports:
      - "3400:3400"
    networks:
      - dev-hello
    volumes:
      - ./logs:/app/logs

networks:
  dev-hello:
    driver: bridge
```

### 3. Running the Containers

To start all services in the background, run the following command:

```bash
docker-compose up --build --remove-orphans -d
```

### 4. Configuring Logstash

#### Logstash Configuration (logstash.conf)

Choose the appropriate configuration for your log source (rolling file appender or socket appender).

Example with Rolling File Appender:
```plaintext
input {
  file {
    path => "/usr/share/logstash/logs/logs*.json"
    start_position => "beginning"
    sincedb_path => "/dev/null"
    codec => "json"
  }
}
filter {
  json { source => "message" target => "parsed_message" }
  grok { match => { "message" => "%{SYSLOGBASE2}" } }
  date { match => [ "timestamp", "MMM d HH:mm:ss", "MMM dd HH:mm:ss" ] }
}
output {
  elasticsearch {
    hosts => ["http://elasticsearch:9200"]
    index => "hellolog-%{+YYYY.MM.dd}"
  }
  stdout { codec => rubydebug }
}
```

### 5. Kibana Setup

- Open Kibana in your browser: [http://localhost:5601](http://localhost:5601)
- Create an index pattern for the logs to visualize them.
- Use Kibanaâ€™s dashboards and visualizations to analyze logs.

## Results and Insights

- **Centralized Log Management**: The ELK stack successfully centralizes logs from the Spring Boot application, allowing for efficient searching, filtering, and visualization of logs in Kibana.
- **Real-Time Monitoring**: The integration provides real-time insights into application behavior, enabling prompt detection and resolution of issues.
- **Performance Insights**: Reveals important metrics such as error rates and response times, crucial for optimizing application performance.

## Conclusion

The ELK stack integration with a Dockerized Spring Boot application simplifies log management and enhances monitoring capabilities. This setup provides comprehensive visibility into application logs and sets the foundation for further enhancements or production deployment.
